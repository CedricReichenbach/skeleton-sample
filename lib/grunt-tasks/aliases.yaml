default:
  - serve

serve:
  - build-dev
  - server

serve-build:
  - build
  - server


build-dev:
  - prepare
  - html-dev
  - css-dev
  - js
  - assets-dev

build:
  - prepare
  - html-prod
  - assets-prod # assets runs before css because grunticon will use optimized svgs
  - css-prod # css needs to run after html because uncss uses generated html pages
  - js-prod
  - server
  # - clean:bower

html-dev:
  - styleguideAssembler
  - pagesAssembler:dev

html-prod:
  - pagesAssembler:prod
  - htmlmin

css-dev:
  - stylesAssembler
  - grunticon:dev
  - sass
  - autoprefixer

css-prod:
  - grunticon:prod
  - sass
  - autoprefixer
  # uncss is removing javascript triggered styles.
  # - uncss
  - cssmin


js-dev:
  - copy:vendorjs
  - copy:componentsjs
  - copy:js

js-prod:
  - js-dev
  - requirejs
  - copy:requireJs
  - clean:js
  - clean:bower
  - clean:components


assets-dev:
  - copy:fonts

assets-prod:
  - assets-dev
  - imagemin
  # - svgmin

prepare:
  - clean # this cleans *generated*     files in dist/
  - copy:images
  - copy:meta
  - copy:fonts

server:
  - connect
  - watch

styleguide:
  - prepare
  - styleguideAssembler



styleguide-dev:
  - clean:styleguideAngular
  - skeleton_assembler_colors
  - skeleton_assembler_typography
  - skeleton_assembler_widgets:styleguide
  - skeleton_angular_styleguide
  - copy:fontsStyleguide   # todo: move this to styleguide assembler
  - copy:assetsStyleguide  # todo: move this to styleguide assembler
